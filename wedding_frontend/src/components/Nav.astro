<nav id='main-nav' class='fixed top-10 left-0 w-full z-50 flex justify-center opacity-0 pointer-events-none transition-opacity duration-300'>
  <div class='nav-bg relative w-full flex justify-center items-center  my-1 py-6'>
    <ul class='relative z-10 flex flex-row space-x-3 sm:space-x-20 xl:space-x-50 sm:text-xl text-md font-bold text-white'>
      <li><a href='#Schedule' class='nav-link'>Eventos</a></li>
      <li><a href='#Locations' class='nav-link'>Ubicaciones</a></li>
      <li><a href='#Lodging' class='nav-link'>Alojamientos</a></li>
      <li><a href='#Survey' class='nav-link'>Asistencias</a></li>
    </ul>
  </div>
</nav>

<style>
  .nav-bg {
    background-image: url("../assets/nav.svg");
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    z-index: 100;
  }
  
    @media (max-width: 640px) {
      .nav-bg {
    background-size: 1000px ;
      }
  }

  .nav-link.active {
    font-weight: bold;
  }

  #main-nav.show {
    opacity: 1;
    pointer-events: auto;
  }
</style>

<script>
  const mainNav = document.getElementById('main-nav');
  const navLinks = document.querySelectorAll('.nav-link');
  
  // Usar Intersection Observer para detectar cuando Nav2 sale de la pantalla
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        const isSmall = window.matchMedia('(max-width: 640px)').matches;
        // Si Nav2 NO está visible en pantalla, mostrar Nav
        if (!entry.isIntersecting || isSmall) {
          mainNav?.classList.add('show');
        } else {
          mainNav?.classList.remove('show');
        }
      });
    },
    { threshold: 0 }
  );

  // Observar Nav2. Si Nav2 aún no está en el DOM cuando corre este script,
  // esperar a DOMContentLoaded para inicializar el observer.
  let nav2 = document.querySelector('nav.nav-curve');
  if (nav2) {
    observer.observe(nav2);
  } else {
    document.addEventListener('DOMContentLoaded', () => {
      nav2 = document.querySelector('nav.nav-curve');
      if (nav2) observer.observe(nav2);
    });
  }
  
  // Lógica de links activos
  navLinks.forEach(link => {
    link.addEventListener('click', () => {
      navLinks.forEach(navLink => navLink.classList.remove('active'));
      link.classList.add('active');
    });
  });
</script>

